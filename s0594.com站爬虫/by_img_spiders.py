import requests
import re
import time
import get_cookies
import json
from lxml import etree
from urllib import parse
from url_parse import parse_url


list_test = ['https://yama888.x.yupoo.com/', '', 'http://piaofeng8384.v.yupoo.com/', '', 'http://moolecole9999.v.yupoo.com/', '', 'http://v.yupoo.com/photos/juicy20141010/albums/', '', 'http://x.yupoo.com/photos/playboynanzhuang/albums', '', 'http://lkjdfs.v.yupoo.com/', '', 'http://camel-active1.x.yupoo.com/', '', 'http://v.yupoo.com/photos/jinsitu/albums/', '', 'http://x.yupoo.com/photos/xxzz0330/albums', '', 'http://nvkufenxiao.v.yupoo.com/', '', 'http://huangshengyin608.v.yupoo.com/', '', 'http://simplecolor.v.yupoo.com/', '', 'http://v.yupoo.com/photos/xiaoyaoma/albums/', '', 'http://v.yupoo.com/photos/cexingcn/albums/', '', 'http://covesggxuannisi.v.yupoo.com/', '', 'http://zsuo.v.yupoo.com/', '', 'http://booliter.v.yupoo.com/', '', 'http://v.yupoo.com/photos/senll/albums/', '', 'http://musenda.v.yupoo.com/', '', 'http://ruida.v.yupoo.com/', '', 'http://zizuliren.v.yupoo.com/', '', 'http://kingslake.v.yupoo.com/', '', 'http://kailai01.v.yupoo.com/', '', 'http://libal9988.v.yupoo.com/', '', 'http://rightbalance.v.yupoo.com', '', 'http://sdk688.v.yupoo.com/', '', 'http://sodear-bag.v.yupoo.com/', '', 'http://kakaximaoyi.v.yupoo.com/', '', 'http://v.yupoo.com/photos/zhensha/albums/', '', 'http://v.yupoo.com/photos/gleestep/albums/', '', 'http://zhaizu.v.yupoo.com/', '', 'http://zk2668182.v.yupoo.com/', '', 'http://v.yupoo.com/photos/yunke/albums/', '', 'http://jubaopifa.v.yupoo.com/', '', 'http://v.yupoo.com/photos/chenxiaohuang/albums/', '', 'http://gerlans.v.yupoo.com/', '', 'http://v.yupoo.com/photos/mw727250722/albums/', '', 'http://v.yupoo.com/photos/jiuxingxiemao/albums/', '', 'http://clen8.v.yupoo.com/', '', 'http://fenghaomaoyi.v.yupoo.com/', '', 'http://fengzuchaoxie.v.yupoo.com/', '', 'http://v.yupoo.com/photos/coolyez/albums/', '', 'http://v.yupoo.com/photos/falanxi/albums/', '', 'http://0596666.v.yupoo.com/', '', 'http://bestshoes888.v.yupoo.com/', '', 'http://liujx30.v.yupoo.com/', '', 'http://v.yupoo.com/photos/fanthuat/albums/', '', 'http://v.yupoo.com/photos/luotugongsi/albums/', '', 'http://mvpboy.v.yupoo.com/', '', 'http://v.yupoo.com/photos/xiserene/albums/', '', 'http://confident66.v.yupoo.com/', '', 'http://v.yupoo.com/photos/937820105shoes/albums/', '', 'http://edanu.v.yupoo.com/', '', 'http://837237069.v.yupoo.com/', '', 'http://v.yupoo.com/photos/scoiattolo/albums/', '', 'http://baolinu.v.yupoo.com/', '', 'http://paimean.v.yupoo.com/', '', 'http://v.yupoo.com/photos/shangyun2003/albums/', '', 'http://dr-lumen.v.yupoo.com/', '', 'http://wangxinyu000.v.yupoo.com/', '', 'http://92xiefu.v.yupoo.com/', '', 'http://editex.v.yupoo.com/', '', 'http://okvon.v.yupoo.com/', '', 'http://fjptak2005.v.yupoo.com/', '', 'http://blaihilton.v.yupoo.com/', '', 'http://omor.v.yupoo.com/', '', 'http://v.yupoo.com/photos/tibonlon2012/albums/', '', 'http://lt899.v.yupoo.com/', '', 'http://mdnw.v.yupoo.com/', '', 'http://v.yupoo.com/photos/ccm188/albums/', '', 'http://shenlinxieye.v.yupoo.com/', '', 'http://v.yupoo.com/photos/tuofanda/albums/', '', 'http://z203315.v.yupoo.com/', '', 'http://v.yupoo.com/photos/ousiun668/albums/', '', 'http://kaixinwangzi.v.yupoo.com/', '', 'http://datangpf.v.yupoo.com', '', 'http://v.yupoo.com/photos/xinbushoes/albums/', '', 'http://ciadhola.v.yupoo.com', '', 'http://xinshilihuwai.v.yupoo.com/', '', 'http://hwds.v.yupoo.com/', '', 'http://czh8682176.x.yupoo.com/', '', 'http://kriss0007.v.yupoo.com/', '', 'http://v.yupoo.com/photos/guilong99/albums/', '', 'http://xingchioutdoor.v.yupoo.com/', '', 'http://shijiluotuo.v.yupoo.com/', '', 'http://v.yupoo.com/photos/raira/albums/', '', 'http://0594anna.v.yupoo.com/', '', 'http://puwte110.v.yupoo.com/', '', 'http://qiangyouli.v.yupoo.com/', '', 'http://v.yupoo.com/photos/taonvxie/albums/', '', 'http://baimulin.v.yupoo.com/', '', 'http://gleestep.v.yupoo.com/', '', 'http://xiebang789.v.yupoo.com/', '', 'http://kw168.v.yupoo.com/', '', 'http://v.yupoo.com/photos/yifengmaoyi1/albums/', '', 'http://v.yupoo.com/photos/cooldry/collections/', '', 'http://v.yupoo.com/photos/qq2536885066/albums/', '', 'http://syudie.v.yupoo.com/', '', 'http://wotedenisen.v.yupoo.com/', '', 'http://lastingcharm.v.yupoo.com/', '', 'http://v.yupoo.com/photos/ruida/albums/', '', 'http://v.yupoo.com/photos/viminko/albums/', '', 'http://v.yupoo.com/photos/aniumaoyi/albums/', '', 'http://v.yupoo.com/photos/aoweinu/albums/', '', 'http://v.yupoo.com/photos/angolaod888/albums/', '', 'http://v.yupoo.com/photos/yhty13505948778/albums/', '', 'http://v.yupoo.com/photos/ptlrf/albums/', '', 'http://tangshichaopai.v.yupoo.com/', '', 'http://ptfgn.v.yupoo.com/', '', 'http://xyj1105.v.yupoo.com/', '', 'http://ptlrf.v.yupoo.com/', '', 'http://ntqz.v.yupoo.com/', '', 'http://06666.x.yupoo.com/', 'https://w.url.cn/s/ASgRU0H', 'https://x.yupoo.com/photos/q5trade/albums', '', 'https://zp10086.x.yupoo.com/', '', 'https://w.url.cn/s/AA3wFDq', '', 'https://644986618.x.yupoo.com', '', 'http://woody0827.x.yupoo.com/', '', 'http://x.yupoo.com/photos/xinxinlanqiu/albums', '', 'https://1989554321.x.yupoo.com', '', 'http://18250501101.x.yupoo.com/', '', 'http://best1996.x.yupoo.com', '', 'http://x.yupoo.com/photos/zdxyjt/albums', '', 'http://zhou312774271.x.yupoo.com/', '', 'http://x.yupoo.com/photos/0594maoyi666/albums', 'http://x.yupoo.com/photos/xdf20160516/albums', 'http://carcnsong.x.yupoo.com/', '', 'http://zeng9999.x.yupoo.com/', '', 'http://c984130377.x.yupoo.com/', '', 'http://x.yupoo.com/photos/q516094402/albums', '', 'http://x.yupoo.com/photos/kairuiyoupin/albums', '', 'http://x.yupoo.com/photos/cx2016/albums', '', 'http://3193593849.x.yupoo.com/', '', 'http://3442066.x.yupoo.com/', '', 'http://x.yupoo.com/photos/dongjing2015/albums', '', 'http://yidanlianshang.v.yupoo.com', '', 'http://yidanlianshang.v.yupoo.com', '', 'http://05942017.v.yupoo.com/', '', '', '', 'http://71712642.v.yupoo.com/', '', 'http://qbmy1221.x.yupoo.com/', '', '', '', 'http://383564616.x.yupoo.com/', '', 'http://x.yupoo.com/photos/yidanlianshang/albums', '', 'http://x.yupoo.com/photos/chenyico/albums', '', 'https://xiaobaimaoyi.x.yupoo.com', '', 'https://w.url.cn/s/A71pBHz', '', 'http://v.yupoo.com/photos/lqwbcwyh1112/albums', '', 'http://x.yupoo.com/photos/88306855/albums', '', 'http://2986934341.v.yupoo.com', '', 'https://x.yupoo.com/photos/guoranhao888/albums?tab=gallery', 'https://x.yupoo.com/photos/haoguo888/albums', 'http://280093721.x.yupoo.com/', '', 'http://x.yupoo.com/photos/jinbu519/albums?tab=gallery', '', 'http://x.yupoo.com/photos/fenghuolanqiu/albums', '', 'http://x.yupoo.com/photos/yidanlianshang/albums', '', 'http://18250501101.x.yupoo.com/', '', 'http://xiongdanb.v.yupoo.com/', '', 'http://wugenanxie.v.yupoo.com', '', 'https://gaoduan001.x.yupoo.com/', '', 'http://v.yupoo.com/photos/liutianming1986/collections', '', 'http://pinpainvxie.x.yupoo.com/', 'http://jingdongshangcheng.v.yupoo.com', 'http://x.yupoo.com/photos/feiyue889/albums', 'http://x.yupoo.com/photos/woke/albums', 'http://baite.v.yupoo.com', 'http://baite2.v.yupoo.com', 'http://2748826101.v.yupoo.com', 'https://dahaibuxie.x.yupoo.com/', 'http://buxiecun.v.yupoo.com', 'http://buxiecun3.x.yupoo.com/', 'http://waimenxiedaomax.v.yupoo.com/', '', 'https://13850281905.x.yupoo.com/', '', 'https://985maoyi.x.yupoo.com/', '', 'http://v.yupoo.com/photos/mingpin5858/', '', 'https://8882888hwh.x.yupoo.com/', '', 'http://gaoduan001.x.yupoo.com/', '', 'https://tianshengchaoxie.x.yupoo.com/', '', 'https://w.url.cn/s/A5MXZLJ', '', 'http://714309171.x.yupoo.com/albums', '', 'https://x.yupoo.com/photos/pifavans/albums', '', 'https://hwh520520.x.yupoo.com/albums', '', 'https://wangyuanrende.x.yupoo.com/', 'https://w.url.cn/s/AbYothl', 'https://cpmy0594.x.yupoo.com/albums', 'https://a201907061624101330121372.szwego.com/static/index.ht', 'http://512014385.v.yupoo.com/', '', 'https://1039396250.x.yupoo.com/', '', 'https://vip8686.x.yupoo.com/albums?page=1', '', 'https://wengmingshun520.x.yupoo.com/albums', '', 'https://www.uootu.com/90496292', '', 'https://18168.x.yupoo.com/', '', 'http://424334770.v.yupoo.com/', '', 'https://x.yupoo.com/photos/qiyuanxieye/albums', '', '', '', 'http://x.yupoo.com/photos/heshunxiechang/albums', '', 'http://sneakers-bdn1688.x.yupoo.com/', '', 'http://x.yupoo.com/photos/2312304180/albums', '', 'https://yy20140722.x.yupoo.com/albums', '', 'http://qq1958192058.v.yupoo.com', 'http://v.yupoo.com/photos/xiaoxiaozuwu/collections/', 'https://1418628994.x.yupoo.com/', '', 'http://x.yupoo.com/photos/cx2016/albums', '', 'http://fenghuotiyuu.x.yupoo.com/', '', 'http://ltxh16888.x.yupoo.com/', '', 'http://x.yupoo.com/photos/yidanlianshang/albums', '', 'http://15605014601.x.yupoo.com/', '', 'http://dzdty.x.yupoo.com', '', 'http://v.yupoo.com/photos/peng0809/collections/', '', 'http://806123045.x.yupoo.com/', '', 'https://deshengxing.x.yupoo.com/', '', 'https://343510668.x.yupoo.com/', '', 'https://ylxy11.x.yupoo.com/albums', '', 'http://xiongdimaoyi168.v.yupoo.com/', '', 'http://v.yupoo.com/photos/bandao-kk/albums/', 'http://v.yupoo.com/photos/bandao-kk/albums/10581654/', 'http://7265886.yupoo.com/', '', 'http://xieba1314.v.yupoo.com/', '', 'http://vala399.v.yupoo.com', '', 'http://feixiangxieye88.v.yupoo.com/', '', 'http://feixiang789.v.yupoo.com/', '', 'http://v.yupoo.com/photos/anlai/albums/', '', 'http://xia2014.v.yupoo.com/', 'http://asics520.v.yupoo.com/', 'http://yyyhf2766.v.yupoo.com/', '', 'http://icm168.v.yupoo.com/', 'http://icm999.v.yupoo.com/', 'http://v.yupoo.com/photos/q302535279/collections/', '', 'http://wtxy168.v.yupoo.com/', '', 'http://1588maoyi.v.yupoo.com/', '', 'http://1535509620.v.yupoo.com/', '', 'http://australiaugg.v.yupoo.com', '', 'http://pt7375.v.yupoo.com/', '', 'http://v.yupoo.com/photos/baishimaoyi1/albums', '', 'http://0594tiantian.v.yupoo.com', 'http://05941777.v.yupoo.com', 'http://v.yupoo.com/photos/zhu9966/collections/', '', 'http://185171717hzc.v.yupoo.com', '', 'http://mkxshoes.v.yupoo.com/', '', 'http://wujunning.v.yupoo.com', '', 'http://chenyico.v.yupoo.com/', '', 'http://3393687085.v.yupoo.com/', 'http://2928774076.v.yupoo.com/', 'http://v.yupoo.com/photos/jinbu519/albums/', '', 'http://peng99916888.v.yupoo.com/', '', 'http://v.yupoo.com/photos/939853589/collections/', '', 'http://xiaochen3344.x.yupoo.com/', '', 'http://whoosay.x.yupoo.com/albums', '', 'http://736609744.v.yupoo.com/', '', 'http://xinxinlanqiu.v.yupoo.com/', '', 'http://295218213.v.yupoo.com/', '', 'http://huangguan-vans.v.yupoo.com/', '', 'http://deshengxing.v.yupoo.com/', '', 'http://x.yupoo.com/photos/liujiasheng1989/albums', '', 'http://x.yupoo.com/photos/18350412932/albums', '', 'http://xyxw888.v.yupoo.com', '', 'http://x.yupoo.com/photos/18823338740/albums', '', 'http://feixieng298.x.yupoo.com/', '', 'http://xilizhenbiao.v.yupoo.com/', '', 'y-3gongsihuo.x.yupoo.com', '', 'http://feifanxiemao888.x.yupoo.com/', '', 'http://lautie666.x.yupoo.com/', '', 'http://v.yupoo.com/photos/zhu9966/collections/', '', 'http://qidian007.x.yupoo.com/', '', 'http://shezai.x.yupoo.com/albums', '', 'http://v.yupoo.com/photos/ljcdengdai/collections/', '', 'http://chaoren-sport.v.yupoo.com', 'http://x.yupoo.com/photos/hx-ty/albums?tab=gallery', 'http://v.yupoo.com/photos/xinxinlanqiu/albums', '', 'http://v.yupoo.com/photos/jinsitu/albums/', '', '', '', 'http://x.yupoo.com/photos/320575481/albums?tab=gallery', '', 'http://v.yupoo.com/photos/pifanvxie/collections/', '', 'http://m308856820.x.yupoo.com/', '', 'http://1997052888.x.yupoo.com/albums?page=1', '', 'http://yjxad999.v.yupoo.com/', 'http://x.yupoo.com/photos/yjxad999/albums', 'http://lilykuangwei.v.yupoo.com', 'http://mstconverse.v.yupoo.com', 'http://v.yupoo.com/photos/3052193254/collections', '', 'http://x.yupoo.com/photos/chenyico/albums', '', 'http://fu18250501333.x.yupoo.com', '', 'http://459996688.v.yupoo.com', '', 'http://x.yupoo.com/photos/1985103432/albums', '', 'http://cx4399.x.yupoo.com/', '', 'http://360431611.x.yupoo.com/', 'http://x.yupoo.com/photos/jelia/albums', 'http://shanna1983.x.yupoo.com', '', 'http://v.yupoo.com/photos/jinbu519/albums/', '', 'http://x.yupoo.com/photos/tuomasi168/albums', '', 'http://764126504.x.yupoo.com/', '', 'http://x.yupoo.com/photos/736609744/albums', '', 'http://hrx456.v.yupoo.com/', '', 'http://dahuang352.v.yupoo.com', '', 'http://jingdongshangcheng.v.yupoo.com', 'http://pinpainvxie.x.yupoo.com/', 'http://15605014601.x.yupoo.com/', '', 'http://duomi888.x.yupoo.com/', 'http://360431611.x.yupoo.com', 'http://2748826101.v.yupoo.com/', '', 'http://v.yupoo.com/photos/linfengshoes/albums/', '', 'http://x.yupoo.com/photos/q3762884/albums', '', 'https://x.yupoo.com/photos/1933342131/albums', '', 'http://3509364284.v.yupoo.com', '', 'https://x.yupoo.com/photos/yhxieye/albums', '', 'http://714309171.x.yupoo.com/albums', '', 'http://xiaochen3344.v.yupoo.com', '', 'http://632632288.x.yupoo.com/', '', 'http://1918009865.v.yupoo.com/', '', 'http://tangshichaopai.v.yupoo.com/', '', 'http://shijianhui.v.yupoo.com/', '', 'http://dashanxieye666.x.yupoo.com/', '', 'http://jehol.x.yupoo.com/', '', 'http://hu350123.x.yupoo.com/', '', 'http://v.yupoo.com/photos/873099391/collections/', '', 'http://3315218598.x.yupoo.com/', '', 'https://lyd80106.x.yupoo.com/', '', 'http://weiyimaoyi.x.yupoo.com/', '', 'https://jxm3553.x.yupoo.com/', 'https://w.url.cn/s/A0JlZ7n', 'https://x.yupoo.com/photos/hoxinxieye/albums', '', 'http://xingli0858.v.yupoo.com', 'http://xingli7069.x.yupoo.com', 'http://1985103432.v.yupoo.com/', '', 'https://cx4399.x.yupoo.com/', '', 'https://zzyyww12.x.yupoo.com/albums', '', 'https://dahaibuxie.x.yupoo.com/', 'http://2748826101.v.yupoo.com/', 'https://x.yupoo.com/photos/dfgerterre/albums', '', 'http://rmxshoes.x.yupoo.com/', '', 'https://kenvitt.x.yupoo.com/', '', 'https://x.yupoo.com/photos/jjinxiuxieye/albums', '', 'https://kimihzy.x.yupoo.com/', '', 'https://yixinxieye.x.yupoo.com/', '', 'http://zhengyangxiemao.v.yupoo.com', '', 'https://www.szwego.com/static/index.html?t=1589782117420#/sh', '', 'http://qiuhui3690.v.yupoo.com/', '', 'https://shoesfacebook.x.yupoo.com/albums', '', 'https://yzzqx.x.yupoo.com', '', 'https://810088138.x.yupoo.com/', '', 'http://maimaitongxie.v.yupoo.com/', '', 'http://sdh60889.v.yupoo.com', '', 'http://wu769809876.v.yupoo.com/', '', 'http://benteng0058.v.yupoo.com/', '', 'http://v.yupoo.com/photos/15359770097/collections/', '', 'http://x.yupoo.com/photos/472127603/albums', '', 'https://x.yupoo.com/photos/ghxy/albums', 'https://x.yupoo.com/photos/ss99/albums', 'http://v.yupoo.com/photos/add820603/collections/', '', 'http://dingshenghuwaimaoyi.v.yupoo.com/', '', 'http://sdh60889.v.yupoo.com/', '', 'http://sudufang.v.yupoo.com/', '', 'http://tanbulangxiemao.v.yupoo.com', '', 'http://xiangguanhuwai.v.yupoo.com/', 'http://hexieshenghuo.v.yupoo.com/', 'http://x.yupoo.com/photos/nbab2b/albums', '', 'http://huifenmaoyi168.v.yupoo.com/', '', 'https://x.yupoo.com/photos/xinpinghengtiyu/albums', '', 'https://phhcc123456.x.yupoo.com/', '', 'https://x.yupoo.com/photos/dazhongguo90/albums', '', 'http://1661613209.x.yupoo.com/', '', 'https://aj-dongli.x.yupoo.com/albums', '', 'http://bufanlqx.x.yupoo.com/albums?tab=gallery', '', 'https://zhanghongping.x.yupoo.com/albums', 'https://bellepf.x.yupoo.com/albums', 'https://bellepf.x.yupoo.com/albums', 'http://zhanghongping.x.yupoo.com/albums', 'http://3298240850.x.yupoo.com/', '', 'http://x.yupoo.com/photos/shimeiqiong/albums', '', 'https://17706949674.x.yupoo.com/', '', 'http://x.yupoo.com/photos/0594maoyi666/albums', '', 'https://2595208666.x.yupoo.com/albums', '', 'https://x.yupoo.com/photos/chenyico/albums', '', 'http://x.yupoo.com/photos/tuomasi168/albums', '', 'https://hexiexiaopu1919.x.yupoo.com/', 'https://diandianmaoyi.x.yupoo.com/', 'https://ak472.x.yupoo.com', '', 'https://w518518.x.yupoo.com/albums', '', 'https://chengxin1888.x.yupoo.com/', '', 'https://w.url.cn/s/AYnxtdZ', '', 'https://guangtou123.x.yupoo.com/albums?tab=gallery', '', 'https://nanxiegongchang123.x.yupoo.com/', '', 'https://kakabite888.x.yupoo.com/', '', 'https://3597757500.x.yupoo.com/albums/', 'https://1685443922.x.yupoo.com/', 'http://baomafa.x.yupoo.com/', '', 'https://baoma668.x.yupoo.com/', '', 'https://yilaigongchang.x.yupoo.com/', 'https://www.szwego.com/static/index.html?t=1592456635279#/sh', 'http://x.yupoo.com/photos/yidanlianshang/albums', '', 'http://shop36913427hl.v.yupoo.com/', '', 'https://18250501101.x.yupoo.com/', '', '', '', 'https://qz998998.x.yupoo.com/', '', 'https://ptafkicks.x.yupoo.com/', '', 'http://x.yupoo.com/photos/afandamaoyi/albums?tab=g', '', 'http://1269314515.x.yupoo.com/albums', '', 'https://269080388.x.yupoo.com/', '', 'http://vanspifa3.v.yupoo.com', '', 'http://x.yupoo.com/photos/tuomasi168/albums', '', 'https://jxh2020.x.yupoo.com/albums', '', 'http://x.yupoo.com/photos/vanspifa3/albums', '', 'http://cx4399.x.yupoo.com/', '', 'https://donghuangxieye.x.yupoo.com/', '', 'https://wan-hui.x.yupoo.com/', '', 'https://1685443922.x.yupoo.com/albums?tab=gallery', 'https://3597757500.x.yupoo.com/albums?tab=gallery', 'https://qazwsxedc823.x.yupoo.com/', '', 'https://vansoso.x.yupoo.com/', '', 'https://zuxiashenghui1.x.yupoo.com/', '', 'https://x.yupoo.com/photos/112073807/albums', '', 'http://gelifushimaoyi.x.yupoo.com', '', 'http://237933526.x.yupoo.com/', '', 'https://66aj.x.yupoo.com/', '', 'http://295218213.v.yupoo.com/', '', 'https://lukecp.x.yupoo.com/', '', 'http://x.yupoo.com/photos/dazhohuai96/albums', '', 'http://295218213.v.yupoo.com/', '', 'https://ak472.x.yupoo.com/', '', 'http://gjdpgc.x.yupoo.com/', '', 'http://kadan888.x.yupoo.com/', '', 'https://w.url.cn/s/A2ypEGE', '', 'https://zhangchenhui87.x.yupoo.com/', '', 'http://classic-kw.v.yupoo.com/', '', 'http://c984130377.x.yupoo.com/', '', 'http://c984130377.x.yupoo.com/', '', 'http://yibofs.x.yupoo.com/', '', 'http://m308856820.x.yupoo.com/', '', 'http://1994tmall.x.yupoo.com', 'https://friends0818.x.yupoo.com', 'https://18250501101.x.yupoo.com/', '', 'https://lth-best-shoes.x.yupoo.com/', '', 'https://lth-best-shoes.x.yupoo.com/', '', 'http://liangtoutian.v.yupoo.com/', '', 'http://218.6.15.58:88', '', 'http://x.yupoo.com/photos/dongxie-vans/albums', '', 'http://v.yupoo.com/photos/shijianguo18/albums/43570762/', '', 'https://369849612.x.yupoo.com', '', 'https://ezu-china.x.yupoo.com/albums', '', 'http://v.yupoo.com/photos/haoxiebaa/collections/', '', 'http://tianya9870.x.yupoo.com', '', 'http://v.yupoo.com/photos/a15080355323a/collections/', '', 'http://airmax66.x.yupoo.com/', '', 'http://899w.x.yupoo.com/', '', 'https://yayadaeyurongfu123.x.yupoo.com/', '', 'http://1139784137.x.yupoo.com/', '', 'http://fuzhuangpifa1234.x.yupoo.com/', '', 'http://adidas-nike-jisuyundong.x.yupoo.com/albums', '', 'https://mujichaopai.x.yupoo.com/albums', '', 'http://lebaochaopai.x.yupoo.com', '', 'http://360sc.x.yupoo.com/', '', 'https://lululemonyujia.x.yupoo.com/', '', 'http://mujichaopai1.x.yupoo.com', '', 'http://hufanhai.x.yupoo.com/', '', 'https://48900569.x.yupoo.com/', '', 'https://syc168.x.yupoo.com/albums', '', 'https://w.url.cn/s/A5MXZLJ', '', '', '', 'https://an29088.x.yupoo.com', '', 'http://kuyiku.x.yupoo.com/', 'https://ajbaobao8.x.yupoo.com/', '', '', 'https://416358467.x.yupoo.com/albums', '', 'http://x.yupoo.com/photos/sx941107/albums?tab=gallery', '', 'https://wanwei2010.x.yupoo.com', '', 'http://mujichaopai.x.yupoo.com/', '', 'http://x.yupoo.com/photos/2312304180/albums', '', 'https://yama888.x.yupoo.com/', '', 'http://shan325619.x.yupoo.com/', '', 'https://w.url.cn/s/A8ZzMfs', '', 'https://hh13539820208.x.yupoo.com/', '', 'https://pt9179.x.yupoo.com/', '', 'http://x.yupoo.com/photos/360sck/albums', '', 'https://aammss.x.yupoo.com/albums/80003217?uid=1&from=single', '', 'http://monclerclothing.v.yupoo.com/', '', 'https://huangfengqiang.x.yupoo.com', '', 'https://x.yupoo.com/photos/tgz5500115/albums', '', 'https://mofangaaa.x.yupoo.com/', 'https://sfgp.x.yupoo.com/', 'https://lcfs99.x.yupoo.com/albums', '', 'https://dlfs.x.yupoo.com/', '', 'http://360scc.x.yupoo.com/', '淘宝爆款专供  加我下一个爆款哥就是你', 'https://w.url.cn/s/AkGQXqE', 'https://3503023480.x.yupoo.com/', 'https://wanwei2010.x.yupoo.com', '', 'https://1639145052.x.yupoo.com/', '', 'https://1639145052.x.yupoo.com/', '', 'http://x.yupoo.com/photos/360sck/albums', '', 'http://x.yupoo.com/photos/360sck/albums', '', 'http://v.yupoo.com/photos/xxzz0330/albums/', '', 'http://dyyjs.x.yupoo.com/', '', 'http://13822135415.x.yupoo.com/', '', 'https://ak472.x.yupoo.com', '', 'http://oyyl13580822565.x.yupoo.com/', '', 'http://yyfs8888.x.yupoo.com/albums', '', 'http://gelifushimaoyi.x.yupoo.com', '', 'http://chaofan1688.x.yupoo.com', '', 'http://shangban.x.yupoo.com/', '', 'http://939351413.v.yupoo.com/', '', 'http://v.yupoo.com/photos/juicy20141010/albums/', '', 'http://piaofeng8384.v.yupoo.com/', '', 'http://yingaoqing.v.yupoo.com/', '', 'http://v.yupoo.com/photos/adidas888888', '', 'http://360sc.v.yupoo.com/', 'http://360scc.v.yupoo.com/', 'http://v.yupoo.com/photos/2015197738/albums', '', 'http://ua888888.v.yupoo.com', '', 'http://hzbing1224.v.yupoo.com/', '', 'http://3348878.v.yupoo.com', '', 'http://v.yupoo.com/photos/helloadidas888/collections/', '', 'http://x.yupoo.com/photos/moncler8889/albums', 'http://v.yupoo.com/photos/moncler8889/albums/13609044/', 'http://chaopaijudianmaoyi.x.yupoo.com/', 'http://xiangshangzhuanmai.x.yupoo.com/', 'http://chaopaifuzhuangchang.x.yupoo.com/', 'http://tangshichaopai.x.yupoo.com/', 'http://123977286.x.yupoo.com/', '', 'http://xh0725.x.yupoo.com/', '', 'http://3348878.v.yupoo.com', '', 'http://x.yupoo.com/photos/ouzhoubei/albums', '', 'http://moncler-1.v.yupoo.com/', '', 'http://x.yupoo.com/photos/xxzz0330/albums', '', 'http://zhuoxiansheng.v.yupoo.com/', '', 'http://8085a.v.yupoo.com', '', 'http://dyyjs.x.yupoo.com/', '', 'http://love-nakaji.v.yupoo.com/', '', 'http://dabayao.x.yupoo.com/', '', 'http://416358467.x.yupoo.com/', '', 'https://clothing2019.x.yupoo.com', '', 'http://miao2017.x.yupoo.com/', 'http://win2018.x.yupoo.com/albums', 'http://tangshichaopai.v.yupoo.com/', '', '', '', 'https://baihe6688.x.yupoo.com/', '', 'http://2675433008.x.yupoo.com/', '', 'http://bailishangmao.x.yupoo.com/', '', 'https://ax15.x.yupoo.com/', '', 'http://18262947249.v.yupoo.com', 'http://x.yupoo.com/photos/adidas12/albums', 'http://szq83201869.v.yupoo.com', '', 'http://48900569.x.yupoo.com/', '', 'https://weinifuwu14.x.yupoo.com/', '', 'http://lingpu0881.v.yupoo.com', '', 'https://2772886490.x.yupoo.com/', '', 'http://aaabbb2001.x.yupoo.com/', '', 'http://cq689.v.yupoo.com/', '', 'http://1271643273.x.yupoo.com/', '', 'http://aixianmaoyi.x.yupoo.com/', '', 'http://18050569635.v.yupoo.com/', '', 'http://540085463.x.yupoo.com/albums', '', 'http://88piju.v.yupoo.com/', '', 'http://lin1526.v.yupoo.com', '', 'https://w.url.cn/s/A5MXZLJ', '', 'http://baobaodiaohuo.x.yupoo.com/', '', 'http://3195899061.x.yupoo.com/', 'http://qzone2518967574.x.yupoo.com/', 'http://x.yupoo.com/photos/dream2017/albums', '', 'https://cpbb.x.yupoo.com/', 'https://w.url.cn/s/AiCaviZ', 'https://cpbb.x.yupoo.com/', 'https://w.url.cn/s/AiCaviZ', 'https://w.url.cn/s/A5fH6gb', '', 'https://w.url.cn/s/AGnsb5Q', '', '', '', 'https://w.url.cn/s/AILyRUd', '', 'https://w.url.cn/s/AIZ5m9X', '', 'www.szwego.com/static/index.html#/shop_detail/A2018052303271', '', 'https://zhanghongping.x.yupoo.com/albums', 'https://bellepf.x.yupoo.com/albums', 'https://bellepf.x.yupoo.com/albums', 'http://zhanghongping.x.yupoo.com/albums', 'https://w.url.cn/s/AUJWKB4', '', 'http://88piju.v.yupoo.com/', '', 'https://A201809221834584460013518.szwego.com/static/index.ht', '', 'https://A201809220201599970142851.szwego.com/static/index.ht', '', 'https://hexiexiaopu1919.x.yupoo.com/', 'https://diandianmaoyi.x.yupoo.com/', 'https://x.yupoo.com/photos/8085a/albums', '', 'http://218.6.13.72:8118', '', 'https://827454746.x.yupoo.com/', '', 'http://2297750550.x.yupoo.com/', '', 'http://vipno1.x.yupoo.com/albums', '', 'http://qzone2518967574.v.yupoo.com', 'https://18011976503.x.yupoo.com/albums', 'http://x.yupoo.com/photos/kaluosha999/albums', '', 'http://wanzpl.x.yupoo.com/collections/2803324', '', 'http://218.6.8.77:89/', '', 'http://qq185869000.x.yupoo.com/', '', 'http://shangyipiju.v.yupoo.com', '', 'http://www.905406.com/', 'https://w.url.cn/s/AbcN9Zd', 'http://daxiongmaoyi.x.yupoo.com/', '', 'http://achenpiju.x.yupoo.com/', 'http://782887378.x.yupoo.com/', 'https://A201807121236155020092596.szwego.com/static/index.ht', '', 'http://z897456.x.yupoo.com/', '', 'http://88piju.v.yupoo.com/', '', 'http://88piju.v.yupoo.com/', '', 'http://88piju.v.yupoo.com/', '', 'http://meibao88.x.yupoo.com/albums?tab=gallery', '', 'http://x.yupoo.com/photos/dream2017/albums', '', 'http://88piju.v.yupoo.com/', '', 'http://3348878.v.yupoo.com', '', '', '', 'https://ax15.x.yupoo.com/', '', 'http://x.yupoo.com/photos/1820785267/albums?tab=gallery', '', 'https://huamei0594.x.yupoo.com/', '', 'http://0594bags.v.yupoo.com/', '', 'https://A2018011513051223102.szwego.com/static/index.html#/s', '', 'http://scpdg888.v.yupoo.com', '', 'http://kama123.x.yupoo.com/collections/587501', '', 'https://244219297.x.yupoo.com/', '', 'http://x.yupoo.com/photos/wzqiuyi/albums', '', 'http://xunmei.x.yupoo.com/albums?tab=gallery&utm_source=qrco', 'http://sailu.x.yupoo.com/albums?tab=gallery', 'http://haiyun2017.v.yupoo.com/', '', 'https://398792588.x.yupoo.com', '', 'https://bujingyun2020.x.yupoo.com/', '', 'https://18558936694.x.yupoo.com/', '', 'https://hf-jerseys.x.yupoo.com', 'https://x.yupoo.com/photos/hf-gyp888/albums', 'http://x.yupoo.com/photos/luhu12/albums', 'http://tcydqy.x.yupoo.com/', 'http://kj078.x.yupoo.com/albums', '', 'http://footballsuit.x.yupoo.com/albums', 'http://x.yupoo.com/photos/ax2084/albums', 'http://1158nba.v.yupoo.com/', '', 'http://feixueqiuyi.x.yupoo.com', '', 'http://bekodj0.x.yupoo.com/', '', 'http://wholesale1819.x.yupoo.com/', '', 'http://www.huanqiu-trade.com/', '', 'https://18959500610.x.yupoo.com/albums', '', 'http://17294.v.yupoo.com/', '', 'http://x.yupoo.com/photos/xiaobudian188/albums', '', 'http://meijiatiebu.v.yupoo.com/', '', 'https://hzp9999.x.yupoo.com/albums?utm_source=qrcode', '', 'https://sy20208888.x.yupoo.com/', '', 'http://xyf888.x.yupoo.com', '', 'http://qq2254073603.x.yupoo.com/', '', 'http://xiangshui8.v.yupoo.com/', '', 'https://pf79799999.x.yupoo.com/', '', 'https://pinpaiyingxiao1688.x.yupoo.com/', '', 'http://yrhz.v.yupoo.com/', '', 'http://hfp6688.x.yupoo.com/', '', 'http://v.yupoo.com/photos/qq1964220855/albums/', '', 'https://1188youpai.x.yupoo.com/', 'https://1188youpai.x.yupoo.com/contact', 'http://kukudingzhi.x.yupoo.com/', '', 'http://electricscooter.v.yupoo.com/', '', 'http://cffno9.v.yupoo.com/', '', '', '', 'http://888080.v.yupoo.com', 'http://strj.v.yupoo.com', '', '', 'https://w.url.cn/s/A5MXZLJ', '', 'http://yongmao7777.x.yupoo.com/', '', 'https://w.url.cn/s/A5fH6gb', '', 'http://1969972076.v.yupoo.com', '', 'https://bellepf.x.yupoo.com/albums', 'http://zhanghongping.x.yupoo.com/albums', 'https://w.url.cn/s/AFVCX4d', '', 'https://a202006181424274600171644.szwego.com/static/index.ht', '', 'http://wanzpl.x.yupoo.com/collections/2803324', '', 'http://7265886.yupoo.com/', '', 'http://replicawatches.v.yupoo.com/', '', 'http://carbon8884.v.yupoo.com', '', 'http://dushangmaoyi.v.yupoo.com/', '', 'http://x.yupoo.com/photos/wanbiaolaodian/albums', '', 'http://yibiyiwatch.v.yupoo.com/', '', 'http://pinpai-shoubiao.v.yupoo.com/', '', '', '', 'http://hsd-watch.x.yupoo.com/', '', 'https://biaoxinyi88.x.yupoo.com/', '', 'http://feng247.x.yupoo.com/', '', 'http://weiweiwatch.x.yupoo.com/', '', 'http://yamahaxiemao.v.yupoo.com', 'http://adidas88nike.v.yupoo.com/', 'https://w.url.cn/s/AnyQjvF', '', 'https://w.url.cn/s/AZo2lYA', '', 'http://huachengbiaoye888.x.yupoo.com/', '', 'https://w.url.cn/s/A5fH6gb', '', 'http://wanzpl.x.yupoo.com/collections/2803324', '', 'http://wanhaomaozi.v.yupoo.com', '', 'http://taipingyangmaoye.v.yupoo.com', '', 'https://x.yupoo.com/photos/ym13959580037/albums/', '', 'https://zylp2017.x.yupoo.com/', '', 'https://huamei0594.x.yupoo.com/', '', 'https://weinifuwu14.x.yupoo.com/', '', 'http://sjcaps.v.yupoo.com/', '', 'http://30zaq30.v.yupoo.com/', '', '', '', 'http://jingdianyanjingpifa.v.yupoo.com/', '', 'http://jiliyanjing.v.yupoo.com', '', 'https://hexiexiaopu1919.x.yupoo.com/', 'https://diandianmaoyi.x.yupoo.com/', 'https://15099972984.x.yupoo.com/', '', 'http://wanzpl.x.yupoo.com/collections/2803324', '', 'http://lmjcly123456.v.yupoo.com/', '', 'http://yuqi123456.x.yupoo.com/', '', 'http://haohaoyanjing.v.yupoo.com/', '', 'https://weinifuwu14.x.yupoo.com/', '', 'http://x.yupoo.com/photos/lh0594/albums', '', 'http://sjzc888.v.yupoo.com/', '', 'http://1945004.x.yupoo.com/albums', '', 'https://w.url.cn/s/A5fH6gb', '', 'https://omg666888.x.yupoo.com/', '', 'http://136299786.v.yupoo.com/', '', 'http://huali-1837.x.yupoo.com', '', 'http://1945004.x.yupoo.com/albums', '', 'http://pandora666.x.yupoo.com/', '', '', '', 'http://58858283.x.yupoo.com/', '', 'http://swarovskii.x.yupoo.com/', '', 'http://hedyli.v.yupoo.com', '', 'http://v.yupoo.com/photos/yuaili13178059926/', '', 'http://panxiaojie.v.yupoo.com/', '', 'http://haixiayidiao.v.yupoo.com/', '', 'http://meijiaoniang-gongyimushu.v.yupoo.com/', '', 'http://x.yupoo.com/photos/yhck1150/albums', '', 'http://218.6.8.77:81/default.html', '', '', '', 'http://topbelt.x.yupoo.com/', 'http://x.yupoo.com/photos/onsty/albums', 'http://18050569635.v.yupoo.com/', '', 'https://w.url.cn/s/A5MXZLJ', '', 'http://x.yupoo.com/photos/dream2017/albums', '', 'http://218.6.8.77:89/', '', 'http://wanzpl.x.yupoo.com/collections/2803324', '', 'http://88piju.v.yupoo.com/', '', 'http://shoudu88.v.yupoo.com/', '', '', '', 'http://huachengbiaoye888.x.yupoo.com/', '', 'http://meijiatiebu.v.yupoo.com/', '', 'https://hzp9999.x.yupoo.com/albums?utm_source=qrcode', '', 'https://sy20208888.x.yupoo.com/', '', 'http://xyf888.x.yupoo.com', '', 'http://qq2254073603.x.yupoo.com/', '', 'http://xiangshui8.v.yupoo.com/', '', 'https://pf79799999.x.yupoo.com/', '', 'https://pinpaiyingxiao1688.x.yupoo.com/', '', 'http://hfp6688.x.yupoo.com/', '', 'http://v.yupoo.com/photos/qq1964220855/albums/', '', 'https://w.url.cn/s/A5fH6gb', '', 'http://omg666.v.yupoo.com', '', 'https://weinifuwu14.x.yupoo.com/', '', 'http://xunmei.x.yupoo.com/albums?tab=gallery&utm_source=qrco', 'http://sailu.x.yupoo.com/albums?tab=gallery', 'https://waimaozhijia.x.yupoo.com/', '', 'http://v.yupoo.com/photos/351873781/collections/', '', 'http://v.yupoo.com/photos/qzone616066678/albums/', '', 'https://weinifuwu14.x.yupoo.com/', '', 'https://369849612.x.yupoo.com', '', 'http://v.yupoo.com/photos/qzone616066678/albums/', '']



class By_Img_Spiders():

    def __init__(self, url_list):
        self.url_list = url_list
        self.headers = {
            "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36"
        }
        self.new_yupoo_list = list()
        self.other_url_list = list()
        self.err_list = list()
        self.finally_list = list()
        self.server_url = "service/album/get_album_themes_list.jsp"

    def select_url(self, url_list):
        temp_yupoo_list = list()
        temp_other_list = list()
        temp_err_list = list()
        url_list = list(set(url_list))
        # 第一次筛选、分类
        for start_url in url_list:
            if "yupoo.com" in start_url:
                if start_url.startswith("http"):
                    temp_yupoo_list.append(start_url)
                else:
                    start_url = "http://" + start_url
                    temp_yupoo_list.append(start_url)
            elif "w.url.cn" in start_url:
                temp_other_list.append(start_url)
            else:
                temp_err_list.append(start_url)
        # 第二次去掉特例和错误的url
        for url in temp_yupoo_list:
            self.yupoo_url_handl(url)
        for url in temp_other_list:
            self.other_url_handl(url)
        for url in temp_err_list:
            self.err_url_handl(url)
        del temp_err_list, temp_yupoo_list, temp_other_list

    def yupoo_url_handl(self, old_url):
        response = requests.get(old_url, headers=self.headers)
        if response.status_code == 200:
            html = etree.HTML(response.text)
            try:
                albums_url = html.xpath("//div[@class='showheader__menus']/a[2]/@href")[0]
            except:
                print("用户账号被冻结:" + old_url)
            else:
                new_url = parse.urljoin(response.url, albums_url)
                self.new_yupoo_list.append(new_url)

    def other_url_handl(self, url):
        response = requests.get(url, headers=self.headers)
        if response.status_code == 200:
            self.other_url_list.append(url)

    def err_url_handl(self, url):
        if len(url) > 0:
            if url.startswith("http"):
                response = requests.get(url, headers=self.headers)
                if response.status_code == 200:
                    self.err_list.append(url)
            elif u'\u4e00' <= url <= u'\u9fff':
                pass
            else:
                url = "http://" + url
                response = requests.get(url, headers=self.headers)
                if response.status_code == 200:
                    self.err_list.append(url)

    def yupoo_spider(self, yupoo_url, yupoo_href_list):
        response = requests.get(yupoo_url, headers=self.headers)
        html = etree.HTML(response.text)
        if len(re.findall(r"该用户主页暂时关闭", response.text)) > 0:
            print("用户账号被冻结:" + yupoo_url)
        elif html.xpath("//a[@class='showheader__menuslink showheader__active']/text()")[0] == "相册":
            temp_albums_list = html.xpath("//div[@class='showindex__parent']/div/a/@href")
            for albums in temp_albums_list:
                yupoo_href_list.append(parse.urljoin(response.url, albums))
            if len(html.xpath("//div[@class='none_select pagination__buttons']/a[@title='后一页']/@href")) == 0:
                print("一个网址爬取完毕！")
            else:
                next_page = html.xpath("//div[@class='none_select pagination__buttons']/a[@title='后一页']/@href")[0]
                next_page = parse.urljoin(response.url, next_page)
                self.yupoo_spider(next_page, yupoo_href_list)
        else:
            print("未知错误：" + yupoo_url)
        return yupoo_href_list

    def get_ypimg_page(self, yupoo_href_list):
        for href in yupoo_href_list:
            temp_dict = dict()
            response = requests.get(href, headers=self.headers)
            html = etree.HTML(response.text)
            albums_title = html.xpath("//div[@class='showalbumheader__gallerydec']/h2/span[1]/text()")
            pic_count = html.xpath("//div[@class='showalbumheader__gallerydec']/h2/span[2]/text()")
            pic_src = html.xpath("//div[@class='showalbum__parent showalbum__nor nor']//img/@src")
            other_info = html.xpath("//div[@class='showalbumheader__gallerydec']/div[1]/text()")
            data_id = html.xpath("//div[@class='showalbum__parent showalbum__nor nor']/div[@class='showalbum__children image__main']/@data-id")
            pic_href = list()
            for id in data_id:
                img_url = parse_url(href, id, "uid=1")
                pic_href.append(img_url)
            temp_dict["相册名称"] = albums_title
            temp_dict["图片数量"] = pic_count
            temp_dict["图片地址"] = [pic for pic in pic_href]
            temp_dict["其他信息"] = other_info
            print(temp_dict)
            self.finally_list.append(temp_dict)

    def get_other_msg(self, cookies, base_url):
        for item in cookies:
            headers = {
                "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36",
                "cookie": "%s=%s" % (item.name, item.value)
            }
        params = {
            "act": "single_album",
            "shop_id": "A202002021618192140113358",
            "time_stamp": int(time.time() * 1000),
        }
        url = parse_url(base_url.lower(), self.server_url, "")
        response = requests.get(url, params=params, headers=headers)
        for img in json.loads(response.text)['result']['goods_list']:
            print(img['imgs'])
            print(img['imgsSrc'])

    def run(self):
        self.select_url(self.url_list)
        for url in self.new_yupoo_list:
            yupoo_href_list = self.yupoo_spider(url, list())
            self.get_ypimg_page(yupoo_href_list)
        for url in self.other_url_list:
            cookies, base_url = get_cookies.get_cookies(url)
            self.get_other_msg(cookies, base_url)
